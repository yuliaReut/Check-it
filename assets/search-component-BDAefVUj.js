import{v as L,r as x,q as T,t as H,n as M,j as b,k,w as V,g as B,A as Q,o as I,x as _}from"./main-DllzQGCZ.js";var q={},K=c=>encodeURIComponent(c).replace(/[!'()*]/g,i=>`%${i.charCodeAt(0).toString(16).toUpperCase()}`),R="%[a-f0-9]{2}",U=new RegExp("("+R+")|([^%]+?)","gi"),p=new RegExp("("+R+")+","gi");function $(c,i){try{return[decodeURIComponent(c.join(""))]}catch{}if(c.length===1)return c;i=i||1;var f=c.slice(0,i),l=c.slice(i);return Array.prototype.concat.call([],$(f),$(l))}function P(c){try{return decodeURIComponent(c)}catch{for(var i=c.match(U)||[],f=1;f<i.length;f++)c=$(i,f).join(""),i=c.match(U)||[];return c}}function z(c){for(var i={"%FE%FF":"��","%FF%FE":"��"},f=p.exec(c);f;){try{i[f[0]]=decodeURIComponent(f[0])}catch{var l=P(f[0]);l!==f[0]&&(i[f[0]]=l)}f=p.exec(c)}i["%C2"]="�";for(var y=Object.keys(i),h=0;h<y.length;h++){var g=y[h];c=c.replace(new RegExp(g,"g"),i[g])}return c}var G=function(c){if(typeof c!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof c+"`");try{return c=c.replace(/\+/g," "),decodeURIComponent(c)}catch{return z(c)}},J=(c,i)=>{if(!(typeof c=="string"&&typeof i=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(i==="")return[c];const f=c.indexOf(i);return f===-1?[c]:[c.slice(0,f),c.slice(f+i.length)]},W=function(c,i){for(var f={},l=Object.keys(c),y=Array.isArray(i),h=0;h<l.length;h++){var g=l[h],j=c[g];(y?i.indexOf(g)!==-1:i(g,j,c))&&(f[g]=j)}return f};(function(c){const i=K,f=G,l=J,y=W,h=r=>r==null,g=Symbol("encodeFragmentIdentifier");function j(r){switch(r.arrayFormat){case"index":return e=>(n,t)=>{const a=n.length;return t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[o(e,r),"[",a,"]"].join("")]:[...n,[o(e,r),"[",o(a,r),"]=",o(t,r)].join("")]};case"bracket":return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[o(e,r),"[]"].join("")]:[...n,[o(e,r),"[]=",o(t,r)].join("")];case"colon-list-separator":return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[o(e,r),":list="].join("")]:[...n,[o(e,r),":list=",o(t,r)].join("")];case"comma":case"separator":case"bracket-separator":{const e=r.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(t,a)=>a===void 0||r.skipNull&&a===null||r.skipEmptyString&&a===""?t:(a=a===null?"":a,t.length===0?[[o(n,r),e,o(a,r)].join("")]:[[t,o(a,r)].join(r.arrayFormatSeparator)])}default:return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,o(e,r)]:[...n,[o(e,r),"=",o(t,r)].join("")]}}function w(r){let e;switch(r.arrayFormat){case"index":return(n,t,a)=>{if(e=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!e){a[n]=t;return}a[n]===void 0&&(a[n]={}),a[n][e[1]]=t};case"bracket":return(n,t,a)=>{if(e=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!e){a[n]=t;return}if(a[n]===void 0){a[n]=[t];return}a[n]=[].concat(a[n],t)};case"colon-list-separator":return(n,t,a)=>{if(e=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!e){a[n]=t;return}if(a[n]===void 0){a[n]=[t];return}a[n]=[].concat(a[n],t)};case"comma":case"separator":return(n,t,a)=>{const d=typeof t=="string"&&t.includes(r.arrayFormatSeparator),s=typeof t=="string"&&!d&&F(t,r).includes(r.arrayFormatSeparator);t=s?F(t,r):t;const m=d||s?t.split(r.arrayFormatSeparator).map(D=>F(D,r)):t===null?t:F(t,r);a[n]=m};case"bracket-separator":return(n,t,a)=>{const d=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!d){a[n]=t&&F(t,r);return}const s=t===null?[]:t.split(r.arrayFormatSeparator).map(m=>F(m,r));if(a[n]===void 0){a[n]=s;return}a[n]=[].concat(a[n],s)};default:return(n,t,a)=>{if(a[n]===void 0){a[n]=t;return}a[n]=[].concat(a[n],t)}}}function E(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function o(r,e){return e.encode?e.strict?i(r):encodeURIComponent(r):r}function F(r,e){return e.decode?f(r):r}function C(r){return Array.isArray(r)?r.sort():typeof r=="object"?C(Object.keys(r)).sort((e,n)=>Number(e)-Number(n)).map(e=>r[e]):r}function O(r){const e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function N(r){let e="";const n=r.indexOf("#");return n!==-1&&(e=r.slice(n)),e}function u(r){r=O(r);const e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function S(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function A(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),E(e.arrayFormatSeparator);const n=w(e),t=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return t;for(const a of r.split("&")){if(a==="")continue;let[d,s]=l(e.decode?a.replace(/\+/g," "):a,"=");s=s===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?s:F(s,e),n(F(d,e),s,t)}for(const a of Object.keys(t)){const d=t[a];if(typeof d=="object"&&d!==null)for(const s of Object.keys(d))d[s]=S(d[s],e);else t[a]=S(d,e)}return e.sort===!1?t:(e.sort===!0?Object.keys(t).sort():Object.keys(t).sort(e.sort)).reduce((a,d)=>{const s=t[d];return s&&typeof s=="object"&&!Array.isArray(s)?a[d]=C(s):a[d]=s,a},Object.create(null))}c.extract=u,c.parse=A,c.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),E(e.arrayFormatSeparator);const n=s=>e.skipNull&&h(r[s])||e.skipEmptyString&&r[s]==="",t=j(e),a={};for(const s of Object.keys(r))n(s)||(a[s]=r[s]);const d=Object.keys(a);return e.sort!==!1&&d.sort(e.sort),d.map(s=>{const m=r[s];return m===void 0?"":m===null?o(s,e):Array.isArray(m)?m.length===0&&e.arrayFormat==="bracket-separator"?o(s,e)+"[]":m.reduce(t(s),[]).join("&"):o(s,e)+"="+o(m,e)}).filter(s=>s.length>0).join("&")},c.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);const[n,t]=l(r,"#");return Object.assign({url:n.split("?")[0]||"",query:A(u(r),e)},e&&e.parseFragmentIdentifier&&t?{fragmentIdentifier:F(t,e)}:{})},c.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0,[g]:!0},e);const n=O(r.url).split("?")[0]||"",t=c.extract(r.url),a=c.parse(t,{sort:!1}),d=Object.assign(a,r.query);let s=c.stringify(d,e);s&&(s=`?${s}`);let m=N(r.url);return r.fragmentIdentifier&&(m=`#${e[g]?o(r.fragmentIdentifier,e):r.fragmentIdentifier}`),`${n}${s}${m}`},c.pick=(r,e,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[g]:!1},n);const{url:t,query:a,fragmentIdentifier:d}=c.parseUrl(r,n);return c.stringifyUrl({url:t,query:y(a,e),fragmentIdentifier:d},n)},c.exclude=(r,e,n)=>{const t=Array.isArray(e)?a=>!e.includes(a):(a,d)=>!e(a,d);return c.pick(r,t,n)}})(q);const X=L(q),Y=(c,i)=>{const[f,l]=x.useState("");return x.useEffect(()=>{const y=setTimeout(()=>l(c),i);return()=>clearTimeout(y)},[i,c]),f},v=()=>{const c=T(),i=X.parse(c.search),[f,l]=x.useState(i.q||""),y=Y(f,500),{data:h,isLoading:g,error:j}=H(y),w=M(),E=()=>{const u=f.trim();if(u!==""){if(B()===Q.AUTH){const A=[...I()?I():[],u];_(A)}w(`/Check-it/search/search?q=${encodeURIComponent(u)}`)}},o=u=>{l(u.target.value)},F=u=>{u.key==="Enter"&&E()},[C,O]=x.useState(!1),N=()=>{O(!0)};return x.useEffect(()=>{const u=S=>{document.querySelector(".user-block")&&document.querySelector(".user-block").contains(S.target)?O(!0):O(!1)};return document.addEventListener("click",u),()=>{document.removeEventListener("click",u)}},[]),b.jsxs("div",{className:"user-block",children:[b.jsx("input",{type:"text",value:f,onChange:o,onKeyDown:F,onFocus:N,placeholder:"Search..."}),b.jsx("button",{onClick:E,children:"Поиск"}),b.jsx("div",{className:"search-movie-card-list  ",children:h?h.films.map(u=>{const S=u.filmId||u.kinopoiskId;return b.jsx(k,{className:`search-movie-card ${C?"":"hidden"}`,to:`${V.ROOT}films/${S}`,children:b.jsxs("div",{className:"search-movie-card__image",children:[b.jsx("img",{src:u.posterUrlPreview,alt:u.nameRu||u.nameEn||"Без названия"}),b.jsx("span",{children:u.nameRu||u.nameEn||"Без названия"})]})},S)}):""})]})};export{v as S,X as q};
