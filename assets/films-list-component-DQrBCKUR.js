import{P as o,r as d,j as r,d as c,a as x,w as m,e as k,p,n as j,A as y,N as _}from"./main-BQT6CTlq.js";import{F as u}from"./film.prop-CdnTFHgk.js";const h=s=>{const{previewImage:e,width:a="271",height:t="175"}=s;let i=d.useRef();return r.jsx("video",{ref:i,src:"",className:"player__video",poster:e,muted:!0,width:a,height:t})};h.propTypes={previewImage:o.string.isRequired,width:o.string,height:o.string};const v=({filmId:s})=>{let e=c()||[];const[a,t]=d.useState(e.includes(s)),i=x(),n=()=>{e=c()||[],e.includes(s)?(e=e.filter(l=>l!==s),m(e),t(!1)):(e.push(s),t(!0)),m(e),i(k(e))};return r.jsx("button",{className:"btn btn--play movie-card__button",type:"button",onClick:n,children:r.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a?r.jsx("use",{xlinkHref:"#heart-full"}):r.jsx("use",{xlinkHref:"#heart"})})})};v.propTypes={filmId:o.number.isRequired};const F=(s,e)=>{const a=s.pathname==="/Check-it",t=s.pathname.includes("/films/");let i;return a?i=`/Check-it/films/${e}`:t?i=s.pathname.split("/").pop()===e.toString()?s.pathname:`${s.pathname.replace(/\/\d+$/,"")}/${e}`:i=`/Check-it/films/${e}`,i};function f(s){const{film:e,isAuthenticated:a}=s,{nameRu:t,posterUrlPreview:i}=e,n=e.filmId||e.kinopoiskId,l=j();let g=F(l,n);return r.jsxs("article",{className:"small-movie-card catalog__movies-card active",children:[a===y.AUTH?r.jsx(v,{filmId:n}):null,r.jsx(_,{to:g,className:"small-movie-card__image",children:r.jsx(h,{className:"player__video",previewImage:i})}),r.jsx("h3",{className:"small-movie-card__title",children:t})]})}f.propTypes={film:u,isAuthenticated:p.PropTypes.string.isRequired};const T=({films:s,isAuthenticated:e})=>{const a=s.slice();return r.jsx("div",{className:"catalog__movies-list",children:a.length>0?a.map(t=>{const i=t.filmId||t.kinopoiskId;return r.jsx(f,{film:t,isAuthenticated:e},i)}):"Добавьте что-нибудь"})};T.propTypes={films:p.PropTypes.arrayOf(u),isAuthenticated:p.PropTypes.string.isRequired};export{T as F,v as a};
