import{j as e,R as h,r as l,b as k,T as y,a as S,u as j,c as w,g as u,A as _,d as b,s as D,e as L,L as O,P as E,l as H}from"./main-BQT6CTlq.js";import{F as v}from"./film.prop-CdnTFHgk.js";import{a as P,F as R}from"./films-list-component-DQrBCKUR.js";import{F as U}from"./logo-component-C05z5kuh.js";import{H as M}from"./header-component-ZJaAUTYN.js";import{a as I,g as K}from"./selectors-CiXzrJxP.js";import"./search-component-dnU0H1S7.js";const g=o=>{const{film:i}=o,{ratingKinopoisk:a,ratingKinopoiskVoteCount:r,nameOriginal:t,genres:s,description:c}=i;return e.jsxs(h.Fragment,{children:[e.jsxs("div",{className:"movie-rating",children:[e.jsx("div",{className:"movie-rating__score",children:a}),e.jsxs("p",{className:"movie-rating__meta",children:[e.jsx("span",{className:"movie-rating__level",children:Number(a)>8?"Very good":"Bad"}),e.jsxs("span",{className:"movie-rating__count",children:[r," оценили"]})]})]}),e.jsxs("div",{className:"movie-card__text",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Описание фильма: "}),c]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Оригинальное название: "}),t]}),e.jsxs("p",{className:"movie-card__starring",children:[e.jsx("strong",{children:" Жанры: "}),s.map(m=>e.jsx("span",{className:"movie-rating__count",children:m.genre},a+m.genre))]})]})]})};g.propTypes={film:v};const N=o=>{const{film:i}=o,{ratingKinopoisk:a,filmLength:r,year:t,countries:s}=i;return e.jsx("div",{className:"movie-card__text movie-card__row",children:e.jsxs("div",{className:"movie-card__text-col",children:[e.jsxs("p",{className:"movie-card__details-item",children:[e.jsx("strong",{className:"movie-card__details-name",children:"Продолжительность"}),e.jsx("span",{className:"movie-card__details-value",children:r})]}),e.jsxs("p",{className:"movie-card__details-item",children:[e.jsx("strong",{className:"movie-card__details-name",children:"Страны:"}),s.map(c=>e.jsx("span",{className:"movie-card__details-value",children:c.country},a+c.country))]}),e.jsxs("p",{className:"movie-card__details-item",children:[e.jsx("strong",{className:"movie-card__details-name",children:"Дата выпуска"}),e.jsx("span",{className:"movie-card__details-value",children:t})]})]})})};N.propTypes={film:v};const f=o=>{const{film:i}=o,[a,r]=l.useState("overview"),t=(s,c)=>{s.preventDefault(),r(c)};return e.jsxs(h.Fragment,{children:[e.jsx("nav",{className:"movie-nav movie-card__nav",children:e.jsxs("ul",{className:"movie-nav__list",children:[e.jsx("li",{className:`movie-nav__item ${a==="overview"?"movie-nav__item--active":""}`,children:e.jsx("a",{href:"#",className:"movie-nav__link",onClick:s=>t(s,"overview"),children:"Overview"})}),e.jsx("li",{className:`movie-nav__item ${a==="details"?"movie-nav__item--active":""}`,children:e.jsx("a",{href:"#",className:"movie-nav__link",onClick:s=>t(s,"details"),children:"Details"})})]})}),a==="overview"&&e.jsx(g,{film:i}),a==="details"&&e.jsx(N,{film:i})]})};f.propTypes={film:v};const $=({films:o})=>{const i=Number(k().id),{isDarkTheme:a}=l.useContext(y),r=S(),t=j(I),s=j(K),[c,m]=l.useState(t.includes(i)),{data:n,error:x,isLoading:F}=w(i);let p;if(u()===_.AUTH&&(p=b()),l.useEffect(()=>{const d=u();r(D(d||_.NO_AUTH))},[r]),l.useEffect(()=>{L(p),m(t.includes(i))},[c,t]),F)return e.jsx(O,{});if(x)return e.jsxs("div",{children:["Ошибка: ",x.toString()]});const T=()=>{r(H())};return e.jsxs(h.Fragment,{children:[e.jsxs("section",{className:"movie-card movie-card--full",children:[e.jsxs("div",{className:"movie-card__hero",children:[e.jsx("div",{className:"movie-card__bg",children:e.jsx("img",{src:n.posterUrl,alt:n.nameOriginal})}),e.jsx("h1",{className:"visually-hidden",children:"Check it"}),e.jsx(M,{onExit:T,isAuthenticated:s}),e.jsx("div",{className:"movie-card__wrap",children:e.jsxs("div",{className:"movie-card__desc",children:[e.jsx("h2",{className:"movie-card__title",children:n.nameRu}),e.jsx("p",{className:"movie-card__meta",children:e.jsxs("span",{className:"movie-card__year",children:[" ",n.year]})}),e.jsx("div",{className:"movie-card__buttons",children:s===_.AUTH?e.jsx(P,{filmId:i}):""})]})})]}),e.jsx("div",{className:"movie-card__wrap movie-card__translate-top",children:e.jsxs("div",{className:"movie-card__info",children:[e.jsx("div",{className:"movie-card__poster movie-card__poster--big",children:e.jsx("img",{src:n.posterUrlPreview,alt:n.nameRu,width:"218",height:"327"})}),e.jsx("div",{className:"movie-card__desc",children:e.jsx(f,{film:n})})]})})]}),e.jsxs("div",{className:`page-content page-content-${a?"dark":"light"}`,children:[e.jsxs("section",{className:"catalog catalog--like-this",children:[e.jsx("h2",{className:"catalog__title",children:"More like this"}),e.jsx("div",{className:"catalog__movies-list",children:e.jsx(R,{isAuthenticated:s,films:o.slice().filter(d=>d.genres.some(A=>n.genres.some(C=>C.genre===A.genre))).slice(0,4),maxFilms:4})})]}),e.jsx(U,{})]})]})};$.propTypes={films:E.arrayOf(v)};export{$ as default};
