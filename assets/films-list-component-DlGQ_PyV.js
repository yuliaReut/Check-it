import{P as o,r as p,j as a,f as x,a as k,g as u,w as d,e as j,p as m,n as y,A as _,N as F}from"./main-C5yPUGWL.js";import{F as h}from"./selectors-gyAreB6C.js";const v=e=>{const{previewImage:s,width:n="271",height:i="175"}=e;let r=p.useRef();return a.jsx("video",{ref:r,src:"",className:"player__video",poster:s,muted:!0,width:n,height:i})};v.propTypes={previewImage:o.string.isRequired,width:o.string,height:o.string};const f=({filmId:e})=>{const s=x(),[n,i]=p.useState(!1),r=k();let t;p.useEffect(()=>{s&&(t=u(),i(t.includes(e)))},[e,s]);const l=()=>{t=u(),t.includes(e)?(t=t.filter(c=>c!==e),d(t),i(!1)):(t.push(e),i(!0)),d(t),r(j(t))};return a.jsx("button",{className:"btn btn--play movie-card__button",type:"button",onClick:l,children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:n?a.jsx("use",{xlinkHref:"#heart-full"}):a.jsx("use",{xlinkHref:"#heart"})})})};f.propTypes={filmId:o.number.isRequired};const T=(e,s)=>{const n=e.pathname==="/Check-it",i=e.pathname.includes("/films/");let r;return n?r=`/Check-it/films/${s}`:i?r=e.pathname.split("/").pop()===s.toString()?e.pathname:`${e.pathname.replace(/\/\d+$/,"")}/${s}`:r=`/Check-it/films/${s}`,r};function g(e){const{film:s,isAuthenticated:n}=e,{nameRu:i,posterUrlPreview:r}=s,t=s.filmId||s.kinopoiskId,l=y();let c=T(l,t);return a.jsxs("article",{className:"small-movie-card catalog__movies-card active",children:[n===_.AUTH?a.jsx(f,{filmId:t}):null,a.jsx(F,{to:c,className:"small-movie-card__image",children:a.jsx(v,{className:"player__video",previewImage:r})}),a.jsx("h3",{className:"small-movie-card__title",children:i})]})}g.propTypes={film:h,isAuthenticated:m.PropTypes.string.isRequired};const w=({films:e,isAuthenticated:s})=>{const n=e.slice();return a.jsx("div",{className:"catalog__movies-list",children:n.map(i=>{const r=i.filmId||i.kinopoiskId;return a.jsx(g,{film:i,isAuthenticated:s},r)})})};w.propTypes={films:m.PropTypes.arrayOf(h),isAuthenticated:m.PropTypes.string.isRequired};export{w as F,f as a};
