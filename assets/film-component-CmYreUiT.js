import{j as e,R as _,r as l,b as k,T as y,a as A,u as x,c as S,g as w,d as b,s as D,A as j,e as L,L as O,P as E,l as P}from"./main-BJBasvi-.js";import{F as v,a as R,g as H}from"./selectors-AU0lcB5K.js";import{a as M,F as U}from"./films-list-component-BY2ZTIAI.js";import{F as I}from"./logo-component-Czmn0RlV.js";import{H as K}from"./header-component-DZ65v7xX.js";import"./search-component-DXBKCZaM.js";const p=o=>{const{film:i}=o,{ratingKinopoisk:a,ratingKinopoiskVoteCount:r,nameOriginal:t,genres:s,description:c}=i;return e.jsxs(_.Fragment,{children:[e.jsxs("div",{className:"movie-rating",children:[e.jsx("div",{className:"movie-rating__score",children:a}),e.jsxs("p",{className:"movie-rating__meta",children:[e.jsx("span",{className:"movie-rating__level",children:Number(a)>8?"Very good":"Bad"}),e.jsxs("span",{className:"movie-rating__count",children:[r," оценили"]})]})]}),e.jsxs("div",{className:"movie-card__text",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Описание фильма: "}),c]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Оригинальное название: "}),t]}),e.jsxs("p",{className:"movie-card__starring",children:[e.jsx("strong",{children:" Жанры: "}),s.map(m=>e.jsx("span",{className:"movie-rating__count",children:m.genre},a+m.genre))]})]})]})};p.propTypes={film:v};const u=o=>{const{film:i}=o,{ratingKinopoisk:a,filmLength:r,year:t,countries:s}=i;return e.jsx("div",{className:"movie-card__text movie-card__row",children:e.jsxs("div",{className:"movie-card__text-col",children:[e.jsxs("p",{className:"movie-card__details-item",children:[e.jsx("strong",{className:"movie-card__details-name",children:"Продолжительность"}),e.jsx("span",{className:"movie-card__details-value",children:r})]}),e.jsxs("p",{className:"movie-card__details-item",children:[e.jsx("strong",{className:"movie-card__details-name",children:"Страны:"}),s.map(c=>e.jsx("span",{className:"movie-card__details-value",children:c.country},a+c.country))]}),e.jsxs("p",{className:"movie-card__details-item",children:[e.jsx("strong",{className:"movie-card__details-name",children:"Дата выпуска"}),e.jsx("span",{className:"movie-card__details-value",children:t})]})]})})};u.propTypes={film:v};const g=o=>{const{film:i}=o,[a,r]=l.useState("overview"),t=(s,c)=>{s.preventDefault(),r(c)};return e.jsxs(_.Fragment,{children:[e.jsx("nav",{className:"movie-nav movie-card__nav",children:e.jsxs("ul",{className:"movie-nav__list",children:[e.jsx("li",{className:`movie-nav__item ${a==="overview"?"movie-nav__item--active":""}`,children:e.jsx("a",{href:"#",className:"movie-nav__link",onClick:s=>t(s,"overview"),children:"Overview"})}),e.jsx("li",{className:`movie-nav__item ${a==="details"?"movie-nav__item--active":""}`,children:e.jsx("a",{href:"#",className:"movie-nav__link",onClick:s=>t(s,"details"),children:"Details"})})]})}),a==="overview"&&e.jsx(p,{film:i}),a==="details"&&e.jsx(u,{film:i})]})};g.propTypes={film:v};const $=({films:o})=>{const i=Number(k().id),{isDarkTheme:a}=l.useContext(y),r=A(),t=x(R),s=x(H),[c,m]=l.useState(t.includes(i)),{data:n,error:h,isLoading:N}=S(i),f=w();if(l.useEffect(()=>{const d=b();r(D(d||j.NO_AUTH))},[r]),l.useEffect(()=>{L(f),m(t.includes(i))},[c,t]),N)return e.jsx(O,{});if(h)return e.jsxs("div",{children:["Ошибка: ",h.toString()]});const F=()=>{r(P())};return e.jsxs(_.Fragment,{children:[e.jsxs("section",{className:"movie-card movie-card--full",children:[e.jsxs("div",{className:"movie-card__hero",children:[e.jsx("div",{className:"movie-card__bg",children:e.jsx("img",{src:n.posterUrl,alt:n.nameOriginal})}),e.jsx("h1",{className:"visually-hidden",children:"Check it"}),e.jsx(K,{onExit:F,isAuthenticated:s}),e.jsx("div",{className:"movie-card__wrap",children:e.jsxs("div",{className:"movie-card__desc",children:[e.jsx("h2",{className:"movie-card__title",children:n.nameRu}),e.jsx("p",{className:"movie-card__meta",children:e.jsxs("span",{className:"movie-card__year",children:[" ",n.year]})}),e.jsx("div",{className:"movie-card__buttons",children:s===j.AUTH?e.jsx(M,{filmId:i}):""})]})})]}),e.jsx("div",{className:"movie-card__wrap movie-card__translate-top",children:e.jsxs("div",{className:"movie-card__info",children:[e.jsx("div",{className:"movie-card__poster movie-card__poster--big",children:e.jsx("img",{src:n.posterUrlPreview,alt:n.nameRu,width:"218",height:"327"})}),e.jsx("div",{className:"movie-card__desc",children:e.jsx(g,{film:n})})]})})]}),e.jsxs("div",{className:`page-content page-content-${a?"dark":"light"}`,children:[e.jsxs("section",{className:"catalog catalog--like-this",children:[e.jsx("h2",{className:"catalog__title",children:"More like this"}),e.jsx("div",{className:"catalog__movies-list",children:e.jsx(U,{isAuthenticated:s,films:o.slice().filter(d=>d.genres.some(C=>n.genres.some(T=>T.genre===C.genre))).slice(0,4),maxFilms:4})})]}),e.jsx(I,{})]})]})};$.propTypes={films:E.arrayOf(v)};export{$ as default};
